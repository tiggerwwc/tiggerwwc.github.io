(this["webpackJsonpsandtable-test"]=this["webpackJsonpsandtable-test"]||[]).push([[0],{50:function(e,t,a){e.exports=a(93)},55:function(e,t,a){},56:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},86:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),i=a.n(r),l=(a(55),a(15)),c=a(10),s=a(2),d=a(95),u=(a(56),a(40)),m=a(8),h=a(41),f=a(11),v=a.n(f),p=a(45),b=a(23),g=a(24),w=a(49),E=function(e,t){var a,n,o,r,i,l,c=t,s=(null===(a=c)||void 0===a?void 0:a.mode)||"random",d=function(){return"pattern"===s?1089:"fullscreen"===c.screenMode?1600:625},u=d(),h=[],f=[],v=[],p={},b={x:-99999,y:-99999},g=0,E=["random","uniform","pattern"];window.particles=h;var y={random:["#FFF","#FFF"],uniform:["#FFF","#FFF"],drop:["#1d75cf","#3a5945"],ribbon:["#702744","#f98d00"]},_=function(){var e,t,a=document.querySelector(".ip-slideshow"),r=document.querySelector("canvas");(r&&(null===a||void 0===a||a.removeChild(r),n=null),n=document.createElement("canvas"),x(),null===a||void 0===a||a.appendChild(n),n.getContext&&n.getContext("2d"))?(o=n.getContext("2d"),"ontouchmove"in window?(n.addEventListener("touchup",k,!1),n.addEventListener("touchmove",F,!1)):(n.addEventListener("mousemove",j,!1),n.addEventListener("mouseout",C,!1)),A("bind","left"),A("bind","right"),window.onresize=x,q(),"fullscreen"!==(null===(e=c)||void 0===e?void 0:e.screenMode)&&setTimeout((function(){s="uniform",u=d(),q()}),2e3),i=document.querySelector(".ip-nav-left"),null===(t=l=document.querySelector(".ip-nav-right"))||void 0===t||t.classList.add("ip-nav-show")):console.error("Sorry, switch to a better browser to see this experiment.")};window.reinitCanvas=_;var N=function(e){c=e};function x(){var e,t;if("fullscreen"===(null===(e=c)||void 0===e?void 0:e.screenMode))n.width=4*window.innerWidth,n.height=4*window.innerHeight;else if("halfscreen"===(null===(t=c)||void 0===t?void 0:t.screenMode)){var a=document.documentElement,o=document.querySelector(".sandtable-board");o&&(n.width=4*(null===o||void 0===o?void 0:o.clientWidth),n.height=4*(null===o||void 0===o?void 0:o.clientHeight),a.style.setProperty("--sand-w","".concat(null===o||void 0===o?void 0:o.clientWidth,"px")),a.style.setProperty("--sand-h","".concat(null===o||void 0===o?void 0:o.clientHeight,"px")))}else n.width=1920,n.height=1440;B()}function M(){return window.pageXOffset||window.document.documentElement.scrollLeft}function O(){return window.pageYOffset||window.document.documentElement.scrollTop}function j(e){e.preventDefault();var t=document.querySelector(".react-transform-element"),a=t?1/(t.getBoundingClientRect().width/t.offsetWidth)*4:1,o=e.pageX,r=e.pageY,i=M()+n.getBoundingClientRect().left,l=O()+n.getBoundingClientRect().top;b.x=(o-i)*a,b.y=(r-l)*a}window.updateCanvasOptions=N;var S=function(){b={x:-1e3,y:-1e3}},C=function(){S()};function k(e){e.preventDefault(),S()}function F(e){e.preventDefault();var t=document.querySelector(".react-transform-element"),a=t?1/(t.getBoundingClientRect().width/t.offsetWidth)*4:1,o=e.touches[0].pageX,r=e.touches[0].pageY,i=M()+n.getBoundingClientRect().left,l=O()+n.getBoundingClientRect().top;b.x=(o-i)*a,b.y=(r-l)*a}function L(e){if(e.preventDefault(),s=E[Math.max(0,--g)],v=[],0===g)return i.classList.remove("ip-nav-show"),void A("unbind","left");g===E.length-1&&(l.classList.add("ip-nav-show"),A("bind","right"))}function T(e){var t;(e.preventDefault(),s=E[Math.min(E.length,++g)],v=[],1===g)&&(null===(t=i)||void 0===t||t.classList.add("ip-nav-show"),A("bind","left"));if(g===E.length-1){var a,n;if(null===(a=l)||void 0===a?void 0:a.classList.contains("ip-nav-show"))null===(n=l)||void 0===n||n.classList.remove("ip-nav-show");A("unbind","right")}}function A(e,t){var a="left"===t?L:T;switch(e){case"bind":var n=document.querySelector(".ip-nav-".concat(t));n&&(n.addEventListener("touchstart",a,!1),n.addEventListener("click",a,!1),n.style.cursor="pointer");break;case"unbind":var o=document.querySelector(".ip-nav-".concat(t));o&&(o.removeEventListener("touchstart",a,!1),o.removeEventListener("click",a,!1),o.style.cursor="default")}}var q=function(e,t){if(t&&N(t),n){for(var a=0,o=u;a<o;a++){var i,l,c=a,d=Math.floor(Math.sqrt(u)),m=c+1,f=Math.ceil(m/d),v=m%d===0?d:m%d,p=c/o,b=v+d*(d-f),g=f+d*(v-1),E=z(0,n.width),_=z(0,n.height);i=Math.floor(n.width/2),l=_-z(0,3*n.height);var x=z(0,1),M=!(x>0||x<12),O=y.random[~~(Math.random()*y.random.length)],j={friction:0,char:I("pattern"===s?g:b),initX:E,initY:_,x:i,y:l,hasBorn:M,ease:.04+.06*Math.random(),bornSpeed:.07+.07*Math.random(),alpha:0,maxAlpha:.4+.5*Math.random(),radius:x,maxRadius:3,color:O,interactive:!1,angle:0,steps:p,stepCount:c,textIndex:b,patternIndex:g};h[a]?h[a]=Object(w.a)({},j,{x:e?j.x:h[a].x,y:e?j.y:h[a].y}):h.push(j)}r&&window.cancelAnimationFrame(r),R()}};function B(){if([].forEach.call(h,(function(e,t){switch(s){case"random":p.x=e.initX,p.y=e.initY;break;case"uniform":case"pattern":var a=Math.floor(Math.sqrt(u)),o=Math.floor(e.stepCount/a),r=e.stepCount%a,i=n.width/a,l=n.height/a,d="fullscreen"===c.screenMode?40:10;p.x=d+o*i,p.y=40+r*l;break;case"ribbon":p.x=.5*n.width+90*Math.sin(t)*Math.cos(t),p.y=320+140*(-Math.sin(t)-1)}var m=.08*(1-e.friction);if(e.interactive)e.x-=(b.x-e.x)*m,e.y-=(b.y-e.y)*m,e.angle+=.08;else{var h=p.x-e.x,f=p.y-e.y;e.initialized&&!c.particlesBackToOrigin||(e.x+=h*m,e.y+=f*m,e.angle+=1e-4,e.initialized=h<.05&&f<.05)}})),v.length<f.length)for(var e=[].slice.call(f,v.length,f.length),t=0;t<e.length;t++)f.splice(t,1)}function R(){o.clearRect(0,0,n.width,n.height),B(),[].forEach.call(h,(function(e,t){if(e.alpha+=.05*(e.maxAlpha-e.alpha),e.hasBorn&&(e.radius+=(0-e.radius)*e.bornSpeed,0===Math.round(e.radius))){switch(s){case"random":e.color=y.random[~~(Math.random()*y.random.length)];break;case"uniform":e.color=y.uniform[~~(Math.random()*y.uniform.length)];var a=function(e){for(var t=[],a=(Math.pow(e,2),-e);a<e;a++)for(var n=-e;n<e;n++){var o=n<0?n+1:n,r=Math.sqrt(Math.pow(o-1.25*e,2)+Math.pow(a-1.45*e,2));if(Math.abs(r)<=2.5*e){var i=Math.abs(r)/(2.4*e)*1;t.push(Math.pow(i,2))}else t.push(.1)}return t}(Math.floor(Math.sqrt(u))/2);e.alpha=a[e.patternIndex-1],e.maxAlpha=a[e.patternIndex-1];break;case"pattern":e.color=y.uniform[~~(Math.random()*y.uniform.length)],"\uff5c"===e.char?(e.alpha=.4,e.maxAlpha=.4):(e.alpha=.75,e.maxAlpha=.75);break;case"ribbon":e.color=y.ribbon[~~(Math.random()*y.ribbon.length)]}e.hasBorn=!1}e.hasBorn||(e.radius+=(e.maxRadius-e.radius)*e.bornSpeed,Math.round(e.radius)===e.maxRadius&&(e.hasBorn=!0));var n=function(e,t){var a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(a*a+n*n)}(b,e)-e.radius;n<=240?(e.interactive=!0,e.friction=(n-120)/120,e.friction>.8&&(e.friction=1)):(e.interactive=!1,e.friction=0)})),function(){var e=50;window.innerWidth<768?e=24:window.innerWidth<992&&(e=36);[].forEach.call(h,(function(t,a){o.save(),o.globalAlpha=t.alpha,o.fillStyle=t.color,o.font="".concat(e,"px Lato, Arial, sans-serif"),o.fillText(t.char,t.x,t.y),o.beginPath(),o.fill(),o.restore()}))}(),r=window.requestAnimFrame(R)}window.reCreateCanvas=q;var z=function(e,t){return~~(Math.random()*(t-e+1)+e)},I=function(e){var t=["\u672a","\u4f86"];if("pattern"===s){if(e){return"1"===["\uff5c"].concat(Object(m.a)(Array.prototype.map.call("000000000000000001010101011011111001000000000000100010101001111111000000100010000000101010100111111000000000000000000010011011101111000010000001000000001010101111111000000000000000001111111111111111000000000000001111111111111111111001000100000111111111111111111111100000000011111111111111111111111000000001111111111111111111111111000000111111111111111111111111111000001111111111111111111111111111000111111110110010110111111111111001111111011101011011011111111111011111110100010110100101011111111011111101010100101010101111111110111101010000001110101111011111111111101000010000101010010101111111110100000000010001001001111111111110000010001000000001111111011111101000000000000001010010101111111000000000100000100000101101011111100000000000000000011100111111111001000000000100001000011011111111000000000000000000001010111111111000000000100000100101001110111111000000000000000000010101111111111000000000000000001001010111111011000000000001000000000100101111111000000000000000100011101010111111001000000000000000000010111111111000000001000000000000010101111111000000000000000000010000101111111",(function(e){return e}))))[e]?t[Math.floor(Math.random()*t.length)]:"\uff5c"}var a=[].concat(t,["\uff5c"]);return a[Math.floor(Math.random()*a.length)]}var n=["\uff5c"].concat(Object(m.a)(Array.prototype.map.call(c.chars||"\uff5c",(function(e){return e}))));return n[e||Math.floor(Math.random()*n.length)]||"\uff5c"};window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/660)},_()},y=(a(67),function(e){var t=e.chars,a=e.particlesBackToOrigin,r=e.mode,i=e.fullscreen,l=e.screenMode,c=void 0===l?"fullscreen":l,d=e.refreshTrigger,u=void 0===d?0:d,h=Object(n.useState)(!1),f=Object(s.a)(h,2),p=f[0],b=f[1];return Object(n.useEffect)((function(){if(t&&(null===t||void 0===t?void 0:t.length)){var e={chars:(t?v.a.reverse(Object(m.a)(t)):[]).join("|"),particlesBackToOrigin:a,mode:r,screenMode:i?"fullscreen":c};p?(n=e,window.reCreateCanvas(!0,n)):(b(!0),E(window,e))}var n}),[t,a,r,i,c,u]),o.a.createElement("div",{className:"sand-test-2"},o.a.createElement("div",{className:"ip-slideshow-wrapper"},o.a.createElement("div",{className:"ip-slideshow"})))}),_=(a(68),function(e){var t=e.show,a=void 0===t||t;return o.a.createElement("div",{className:"loader-dots ".concat(a?"is-show":"")},o.a.createElement("span",{className:"loader-dots__dot"}),o.a.createElement("span",{className:"loader-dots__dot"}),o.a.createElement("span",{className:"loader-dots__dot"}),o.a.createElement("span",{className:"loader-dots__dot"}))}),N=a(42),x=a.n(N).a.create({baseURL:"https://api.sandtable.hk/",timeout:5e3,headers:{"Content-Type":"application/json"}}),M=x,O=(a(86),function(e){var t=e.fullscreen,a=Object(c.f)(),r=Object(n.useState)(0),i=Object(s.a)(r,2),l=i[0],d=i[1],f=Object(n.useState)(""),w=Object(s.a)(f,2),E=w[0],N=w[1],x=Object(n.useState)([]),O=Object(s.a)(x,2),j=O[0],S=O[1],C=Object(n.useState)(!0),k=Object(s.a)(C,2),F=k[0],L=(k[1],Object(n.useState)(t?"uniform":"pattern")),T=Object(s.a)(L,2),A=T[0],q=(T[1],Object(n.useState)(t?"fullscreen":"halfscreen")),B=Object(s.a)(q,2),R=B[0],z=B[1],I=Object(n.useState)(!1),W=Object(s.a)(I,2),H=W[0],P=W[1],K=Object(n.useState)(!1),U=Object(s.a)(K,2),Z=U[0],D=U[1],X=Object(n.useState)(0),Y=Object(s.a)(X,2),J=Y[0],V=Y[1],$=function(){M.get("messages").then((function(e){var t=e.data.map((function(e){return e.message}));v.a.xor(t,j).length&&S(t)})).catch((function(e){var t=["\u9019\u4e0d\u662f","\u771f\u6b63\u7684","\u6587\u6848"];v.a.xor(t,j).length&&S(t)})).then((function(){d(l+1)})),V(J+1)};Object(n.useEffect)((function(){new URLSearchParams(window.location.search).get("wall")&&(z("fullscreen"),a.replace("/wall")),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),500),"fullscreen"!==R&&setTimeout((function(){}),2500),$()}),[]),Object(h.a)((function(){"fullscreen"===R&&$()}),4e4);var G=function(){var e,t=E,a=[].concat(Object(m.a)(j),[t]);e=t,M.post("submit-message?message=".concat(e)),S(a),N("")},Q=function(){var e;e="about",g.scroller.scrollTo("anchor-".concat(e),{duration:1e3,delay:50,smooth:!0,offset:-40}),P(!H)},ee=function(){return o.a.createElement("div",{className:"sandtable__sidebar"},o.a.createElement("button",{type:"button",onClick:function(){return Q()},className:"sandtable__sidelink"},"About"),o.a.createElement("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"sandtable__sidelink"},"Support"),o.a.createElement("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"sandtable__sidelink"},"Follow"))};return o.a.createElement("div",{className:"sandtable is-".concat(R)},o.a.createElement("div",{className:"sandtable__mobile-menu"},o.a.createElement(ee,null)),o.a.createElement("div",{className:"sandtable__body"},o.a.createElement("div",{className:"sandtable__board"},o.a.createElement("div",{className:"sandtable__head"},o.a.createElement("img",{className:"sandtable__logo-en",src:"".concat(window.PUBLIC_URL,"/img/img-sandtable-title.svg"),alt:""}),o.a.createElement("img",{className:"sandtable__logo-zh",src:"".concat(window.PUBLIC_URL,"/img/img-sandtable-title-zh.svg"),alt:""})),o.a.createElement("div",{className:"sandtable-board"},o.a.createElement(b.b,{defaultScale:1,options:{minScale:1,maxScale:4},onZoomChange:function(e){window.canvasZoom=(e.scale-1)/3*100}},(function(e){var t,a,n=e.zoomIn,r=e.zoomOut,i=(e.resetTransform,e.setScale);Object(u.a)(e,["zoomIn","zoomOut","resetTransform","setScale"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,null,o.a.createElement("div",{className:"sandtable-board__zoomer"},o.a.createElement("div",{className:"sandtable-board__body"},o.a.createElement(y,{chars:j,particlesBackToOrigin:F,mode:A,screenMode:R,refreshTrigger:l})))),o.a.createElement("div",{className:"tools-slider"},o.a.createElement("div",{className:"tools-slider__wrapper"},o.a.createElement(p.a,{className:"tools-slider__body",thumbClassName:"tools-slider__thumb",trackClassName:"tools-slider__track",renderThumb:function(e,t){return o.a.createElement("div",e,t.valueNow)},defaultValue:(null===(t=window)||void 0===t?void 0:t.canvasZoom)||0,value:(null===(a=window)||void 0===a?void 0:a.canvasZoom)||0,onChange:function(e){i(1+e/100*3)}})),o.a.createElement("button",{className:"tools-slider__zoom-out",type:"button",title:"Zoom Out",onClick:r},"-"),o.a.createElement("button",{className:"tools-slider__zoom-in",type:"button",title:"Zoom In",onClick:n},"+")))}))),o.a.createElement("nav",null,o.a.createElement("span",{className:"ip-nav-left"}),o.a.createElement("span",{className:"ip-nav-right"}))),o.a.createElement("div",{className:"sandtable__control"},o.a.createElement("div",{className:"sandtable__head"},o.a.createElement("div",null),o.a.createElement("div",{className:"sandtable__sitetitle"},o.a.createElement("span",null,"Write Together \u4e00\u8d77\u66f8\u5beb"))),o.a.createElement("div",{className:"sandtable-interact-panel"},o.a.createElement("div",{className:"sandtable-msg"},o.a.createElement("div",{className:"sandtable-msg__title"},"\u4e00\u8d77\u66f8\u5beb\u9999\u6e2f\u4e4b\u66f8 Let\u2019s continue the story of Hong Kong"),o.a.createElement("div",{className:"sandtable-msg__msgs"},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:"<em>\u81f4\u9999\u6e2f To Hong Kong</em> <span></span> ".concat(j.join(' <span class="sandtable-msg__dash"></span> '))}}),o.a.createElement(_,{show:Z})),o.a.createElement("div",{className:"sandtable-msg-input"},o.a.createElement("input",{type:"text",value:E,placeholder:"\u4e00\u8d77\u66f8\u5beb Write Together ",onFocus:function(){D(!0)},onBlur:function(){D(!1)},onChange:function(e){return N(e.target.value)}}),o.a.createElement("button",{type:"button",onClick:function(){return G()}},"Submit"))),o.a.createElement("div",{className:"sandtable-about ".concat(H?"is-active":"")},o.a.createElement(g.Element,{name:"anchor-about"},o.a.createElement("div",{className:"sandtable-scrollpane"},o.a.createElement("h3",{className:"sandtable-about__title"},"\u95dc\u65bc About"),o.a.createElement("div",{className:"sandtable-about__desc"},o.a.createElement("p",null,"Hong Kong is a nexus and a vessel for resonance between multiple cultures: if captured in words, it would be a co-authored, dynamic book of interactions, transcending time, and cultural differences."),o.a.createElement("p",null,"Visitors are invited to develop stories, dreams, and speculations on the histories and futures of Hong Kong as they encounter the urban legend of Ah Kwan Showing the Way, a fantasy concocted by early British colonialists. Combined with the materiality and notion of fortune-telling rituals, the audience will play a game of Chinese Whispers with this local legend as the basis, each day regenerating the past and producing a \u2018fortune\u2019 for the future."),o.a.createElement("p",null,"Captured in sand, visitors\u2019 written strokes will be projected in the mirroring sites and recorded over the duration of the exhibition to collate an archive of resonance on- site and online. The pavilion, therefore, presents an alternative archive, documenting the multiple, interwoven, non-linear histories of Hong Kong, and encouraging collective speculation beyond the rhetorical narratives of the city\u2019s future.")))))),o.a.createElement(ee,null))))}),j=function(e){var t=e.fullscreen,a=Object(n.useState)(!1),r=Object(s.a)(a,2);r[0],r[1],Object(d.a)().t,Object(c.f)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"main-layout"},o.a.createElement("h1",{className:"a11y-hidden"},"Sand Table"),o.a.createElement("main",{className:"main-layout__body"},o.a.createElement(O,{fullscreen:t}))))},S=(a(92),function(e){e.title,e.children;var t=Object(n.useState)(new Array(1089).fill(0)),a=Object(s.a)(t,2),r=a[0],i=a[1];Object(n.useEffect)((function(){var e=localStorage.getItem("onPoints");if(e){var t=Array.prototype.map.call(e||"",(function(e){return Number(e)}));i(t)}}),[]);return o.a.createElement("div",{className:"pattern-creater"},o.a.createElement("div",{className:"pattern-creater__board"},r.map((function(e,t){return o.a.createElement("button",{className:"".concat(r[t]?"is-active":""),key:"point-".concat(t+1),type:"button",onClick:function(){return function(e){var t=Object(m.a)(r);t[e]=r[e]?0:1,i(t),localStorage.setItem("onPoints",t.join(""))}(t)}},o.a.createElement("span",{className:"a11y-hidden"},"point"))}))),o.a.createElement("div",{className:"pattern-creater__result"},r.join("")))}),C=function(){return o.a.createElement(l.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/wall"},o.a.createElement(j,{fullscreen:!0})),o.a.createElement(c.a,{exact:!0,path:"/pattern",component:S}),o.a.createElement(c.a,{exact:!0,path:"/",component:j})))},k=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.57ed579d.chunk.js.map